@model IEnumerable<Cart>
<link href="~/css/ViewSpecific/Customer.css" rel="stylesheet" />


@{ decimal total = 0;}
<section class="mx-auto shadow pb-2 col-12 col-lg-9 col-xl-6">
    <div class="text-center text-white mb-2 py-3">
        <h2>Kundkorg</h2>
    </div>
    <hr />

    @foreach (var item in Model)
    {
        <div class="basket-body d-flex align-content-center">
            <div class="text-center col-sm-12 col-lg-6">
                <div class="row p-1">
                    <div class="col-12 p-1">
                        <div class="container-cards-cart p-2 ">

                            <div class="image-cart"></div>
                            @if (item.Product.Images.Any())
                            {
                                <img src="@item.Product.Images.First().URL" style="width: 75px;" class="border border-0" />
                            }
                            else
                            {
                                <img src="https://placehold.co/100x100" style="width: 75px;" />
                            }
                        </div>
                        <div class="kundkorg-egen">
                            <div class="text-center d-flex flex-column">
                                <div><strong>@item.Product.Title</strong></div>
                                <div class=""> @item.Product.Price.ToString("c0") /st</div>
                            </div>
                            <div class="d-flex text-center justify-content-center align-items-center">
                                <p class="mb-0">Antal:</p>
                                <div>
                                    <a asp-area="Customer" asp-controller="Cart" asp-action="Minus" asp-route-id="@item.CartId" class="ms-2"><i class="bi bi-dash-square basket_minus_plus"></i></a>
                                </div>
                                <span class="px-1">@item.Count</span>
                                <div>
                                    <a asp-area="Customer" asp-controller="Cart" asp-action="Plus" asp-route-id="@item.CartId" class="me-3"><i class="bi bi-plus-square basket_minus_plus"></i></a>
                                </div>
                                <div>
                                    <a asp-area="Customer" asp-controller="Cart" asp-action="Delete" asp-route-id="@item.CartId" class="me-1"><i class="bi bi-trash basket_trash"></i></a>
                                </div>
                            </div>
                            <div class="fw-bold">
                                @((item.Product.Price * item.Count).ToString("c0"))
                            </div>
                        </div>

                    </div>
                </div>
            </div>


            <input hidden @{
                total += (item.Product.Price * item.Count);
            } />
        </div>
        <hr />
    }

    <div class="text-center mb-3">
        <p class="fs-4"><strong>Totalt: @total.ToString("C0")</strong></p>
        <a asp-area="Customer" asp-controller="Cart" asp-action="Checkout" class="btn btn-outline-dark d-block mx-auto w-50">Checkout</a>
    </div>
</section>

